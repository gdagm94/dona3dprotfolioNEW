import"https://cdn.jsdelivr.net/npm/three@0.133.1/examples/jsm/libs/stats.module.js";import{OrbitControls as U}from"https://cdn.jsdelivr.net/npm/three@0.133.1/examples/jsm/controls/OrbitControls.js";import{GLTFLoader as K}from"https://cdn.jsdelivr.net/npm/three@0.133.1/examples/jsm/loaders/GLTFLoader.js";import{DRACOLoader as V}from"https://cdn.jsdelivr.net/npm/three@0.133.1/examples/jsm/loaders/DRACOLoader.js";import{FontLoader as Y}from"https://cdn.jsdelivr.net/npm/three@0.133.1/examples/jsm/loaders/FontLoader.js";import{TextGeometry as S}from"https://cdn.jsdelivr.net/npm/three@0.133.1/examples/jsm/geometries/TextGeometry.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function a(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(e){if(e.ep)return;e.ep=!0;const n=a(e);fetch(e.href,n)}})();gsap.to(someObject,{duration:1,x:100});let w="light",E=null,P=null,u=null,m=null,x,J=window.matchMedia("(max-width: 992px)").matches,X=document.querySelector(".experience-canvas");const Z=document.getElementById("loader-wrapper");let Q=["fan_rotation","fan_rotation.001","fan_rotation.002","fan_rotation.003","fan_rotation.004"],p=[{image:"textures/toastwolrd.png",url:"https://toastwolrd.bigcartel.com/"},{image:"textures/nouri.png",url:"https://uxfol.io/p/386305e4/0262f760"},{image:"textures/bobcat.png",url:"https://www.youtube.com/watch?v=NS2l5GU-WiE"},{image:"textures/universal.png",url:"https://www.youtube.com/watch?v=BUValS_grGI"},{image:"textures/designprocess.png",url:"https://drive.google.com/file/d/1vKdFv6T0pnTZAwez6n1UlJqkwGxORcsK/view"}],z={x:.12,y:.2,z:.55},B={x:-1.54,y:.13,z:1.41},C={x:1,y:.45,z:.01},I={x:.05,y:.05,z:0};const r=new THREE.Scene,c=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.01,1e3);let y={x:1.009028643133046,y:.5463638814987481,z:.4983449671971262},$={x:-.8313297556598935,y:.9383399492446749,z:.7240714481613063};c.position.set(y.x,y.y,y.z);const g=new THREE.WebGLRenderer({canvas:X,antialias:!0});g.setSize(window.innerWidth,window.innerHeight);g.setPixelRatio(window.devicePixelRatio);g.shadowMap.enabled=!0;g.shadowMap.type=THREE.PCFSoftShadowMap;const d=new U(c,g.domElement);d.enablePan=!1;d.minDistance=.9;d.maxDistance=1.6;d.minAzimuthAngle=.2;d.maxAzimuthAngle=Math.PI*.78;d.minPolarAngle=.3;d.maxPolarAngle=Math.PI/2;d.update();const k=new V;k.setDecoderPath("draco/");const A=new K;A.setDRACOLoader(k);A.load("models/room.glb",function(t){Z.style.display="none";const o=document.createElement("video");o.src="textures/cybersite.mov",o.muted=!0,o.playsInline=!0,o.autoplay=!0,o.loop=!0;const a=new THREE.VideoTexture(o);a.minFilter=THREE.NearestFilter,a.magFilter=THREE.NearestFilter,a.generateMipmaps=!1,a.encoding=THREE.sRGBEncoding,t.scene.children.forEach(e=>{if(e.name!=="Wall"&&(e.castShadow=!0),e.receiveShadow=!0,e.children&&e.children.forEach(n=>{n.name!=="Book001"&&n.name!=="Switch"&&(n.castShadow=!0),n.receiveShadow=!0}),e.name==="Stand"&&(e.children[0].material=new THREE.MeshBasicMaterial({map:a}),o.play()),e.name==="CPU"&&(e.children[0].material=new THREE.MeshPhysicalMaterial,e.children[0].material.roughness=0,e.children[0].material.color.set(10066329),e.children[0].material.ior=3,e.children[0].material.transmission=2,e.children[0].material.opacity=.8,e.children[0].material.depthWrite=!1,e.children[0].material.depthTest=!1,e.children[1].material=new THREE.MeshPhysicalMaterial,e.children[1].material.roughness=0,e.children[1].material.color.set(10066329),e.children[1].material.ior=3,e.children[1].material.transmission=1,e.children[1].material.opacity=.8,e.children[1].material.depthWrite=!1,e.children[1].material.depthTest=!1),e.name==="Book"){E=e.children[0];const n=new THREE.TextureLoader().load("textures/Design101.png");n.flipY=!1,e.material=new THREE.MeshStandardMaterial({color:16777215,map:n})}e.name==="SwitchBoard"&&(P=e.children[0])}),r.add(t.scene),W(),x=new THREE.AnimationMixer(t.scene);const i=t.animations;Q.forEach(e=>{const n=THREE.AnimationClip.findByName(i,e);n&&x.clipAction(n).play()}),te(),ie(),re(),se(),le(),ce(t.scene)},function(t){console.error(t)});const h=new THREE.AmbientLight(16777215,.6);r.add(h);const l=new THREE.PointLight(16777215,2.5,10);l.position.set(.3,2,.5);l.castShadow=!0;l.shadow.radius=5;l.shadow.mapSize.width=2048;l.shadow.mapSize.height=2048;l.shadow.camera.far=2.5;l.shadow.bias=-.002;r.add(l);const D=new THREE.PointLight(16711680,30,.2),j=new THREE.PointLight(65280,30,.12),O=new THREE.PointLight(65280,30,.2),_=new THREE.PointLight(65280,30,.2),b=new THREE.PointLight(65280,30,.05);D.position.set(0,.29,-.29);j.position.set(-.15,.29,-.29);O.position.set(.21,.29,-.29);_.position.set(.21,.19,-.29);b.position.set(.21,.08,-.29);r.add(D);r.add(j);r.add(O);r.add(_);r.add(b);const T=new THREE.PointLight(16711680,0,1.1),L=new THREE.PointLight(16711680,0,1.1),R=new THREE.PointLight(16711680,0,1.1),H=new THREE.PointLight(16711680,0,1.1);T.position.set(-.2,.6,.24);L.position.set(-.2,.6,.42);R.position.set(-.2,.6,.01);H.position.set(-.2,.6,-.14);r.add(T);r.add(L);r.add(R);r.add(H);const ee=new THREE.Clock;function W(){requestAnimationFrame(W),x&&x.update(ee.getDelta()),g.render(r,c)}function te(){const t=new Y;t.load("fonts/unione.json",function(o){const a=[new THREE.MeshPhongMaterial({color:1515303,flatShading:!0}),new THREE.MeshPhongMaterial({color:16777215})],i=new S("Hey, I'm Donatos",{font:o,size:.08,height:.01});u=new THREE.Mesh(i,a),u.rotation.y=Math.PI*.5,u.position.set(-.27,.55,.5),r.add(u)}),t.load("fonts/helvatica.json",function(o){const a=[new THREE.MeshPhongMaterial({color:1515303,flatShading:!0}),new THREE.MeshPhongMaterial({color:16777215})],i=new S("Creating products and refining processes",{font:o,size:.018,height:0});m=new THREE.Mesh(i,a),m.rotation.y=Math.PI*.5,m.position.set(-.255,.5,.5),r.add(m)})}function oe(t){t==="dark"?(P.rotation.z=Math.PI/7,document.body.classList.remove("light-theme"),document.body.classList.add("dark-theme"),gsap.to(l.color,{r:.2725490196078431,g:.23137254901960785,b:.6862745098039216}),gsap.to(h.color,{r:.17254901960784313,g:.23137254901960785,b:.6862745098039216}),gsap.to(l,{intensity:1.5}),gsap.to(h,{intensity:.3}),gsap.to(b,{distance:.07}),gsap.to(u.material[0].color,{r:8,g:8,b:8,duration:0}),gsap.to(u.material[1].color,{r:5,g:5,b:5,duration:0}),gsap.to(m.material[0].color,{r:8,g:8,b:8,duration:0}),gsap.to(m.material[1].color,{r:5,g:5,b:5,duration:0}),gsap.to(T,{intensity:.6}),gsap.to(L,{intensity:.6}),gsap.to(R,{intensity:.6}),gsap.to(H,{intensity:.6})):(P.rotation.z=0,document.body.classList.remove("dark-theme"),document.body.classList.add("light-theme"),gsap.to(l.color,{r:1,g:1,b:1}),gsap.to(h.color,{r:1,g:1,b:1}),gsap.to(l,{intensity:2.5}),gsap.to(h,{intensity:.6}),gsap.to(b,{distance:.05}),gsap.to(u.material[0].color,{r:.09019607843137255,g:.12156862745098039,b:.15294117647058825,duration:0}),gsap.to(u.material[1].color,{r:1,g:1,b:1,duration:0}),gsap.to(m.material[0].color,{r:.09019607843137255,g:.12156862745098039,b:.15294117647058825,duration:0}),gsap.to(m.material[1].color,{r:1,g:1,b:1,duration:0}),gsap.to(T,{intensity:0}),gsap.to(L,{intensity:0}),gsap.to(R,{intensity:0}),gsap.to(H,{intensity:0}))}function ne(){d.enabled=!0}function M(){d.enabled=!1}function v(){document.getElementById("close-btn").style.display="block"}function ae(){document.getElementById("close-btn").style.display="none"}function F(){E&&gsap.to(E.rotation,{x:0,duration:1.5})}function G(){p.length!==0&&p.forEach((t,o)=>{gsap.to(t.mesh.material,{opacity:0,duration:1}),gsap.to(t.mesh.position,{y:t.y,duration:1}),gsap.to(t.mesh.scale,{x:0,y:0,z:0,duration:0,delay:1})})}function N(){F(),G(),ae(),gsap.to(c.position,{...y,duration:1.5}),gsap.to(c.rotation,{...$,duration:1.5}),gsap.delayedCall(1.5,ne),w!=="dark"&&gsap.to(l,{intensity:2.5,duration:1.5})}function ie(){document.getElementById("logo").addEventListener("click",function(t){t.preventDefault(),N()})}function q(){E&&(gsap.to(c.position,{...z,duration:1.5}),gsap.to(c.rotation,{...B,duration:1.5}),gsap.to(E.rotation,{x:Math.PI,duration:1.5,delay:1.5}),w!=="dark"&&gsap.to(l,{intensity:1,duration:1.5}))}function re(){document.getElementById("about-menu").addEventListener("click",function(t){t.preventDefault(),M(),G(),q(),gsap.delayedCall(1.5,v)})}function se(){p.forEach((t,o)=>{const a=o%3===0?0:1,i=Math.floor(o/3),e=new THREE.PlaneGeometry(.71,.4),n=new THREE.MeshBasicMaterial({color:16777215,map:new THREE.TextureLoader().load(t.image),transparent:!0,opacity:0}),s=new THREE.Mesh(e,n);s.name="project",s.userData={url:t.url},s.position.set(.3+o*.8*a,1-i*.5,-1.15),s.scale.set(0,0,0),p[o].mesh=s,p[o].y=1-i*.5,r.add(s)}),document.getElementById("projects-menu").addEventListener("click",function(t){t.preventDefault(),M(),F(),gsap.to(c.position,{...C,duration:1.5}),gsap.to(c.rotation,{...I,duration:1.5}),gsap.delayedCall(1.5,v),p.forEach((o,a)=>{o.mesh.scale.set(1,1,1),gsap.to(o.mesh.material,{opacity:1,duration:1.5,delay:1.5+a*.1}),gsap.to(o.mesh.position,{y:o.y+.05,duration:1,delay:1.5+a*.1})})})}function le(){const t=new THREE.Vector2,o=new THREE.Raycaster;let a;window.addEventListener("click",function(i){const e=w==="light"?"dark":"light",n=document.getElementById("close-btn"),s=document.getElementById("projects-menu");if(i.target===n||n.contains(i.target)||i.target===s||s.contains(i.target))return!1;t.x=i.clientX/window.innerWidth*2-1,t.y=-(i.clientY/window.innerHeight)*2+1,o.setFromCamera(t,c),a=o.intersectObjects(r.children),a.forEach(f=>{f.object.name==="project"&&f.object.userData.url&&window.open(f.object.userData.url),(f.object.name==="Book"||f.object.name==="Book001")&&(M(),q(),gsap.delayedCall(1.5,v)),(f.object.name==="SwitchBoard"||f.object.name==="Switch")&&(w=e,oe(w))})})}function ce(t){J&&(t.scale.set(.95,.95,.95),z={x:.09,y:.23,z:.51},B={x:-1.57,y:0,z:1.57},C={x:1.1,y:.82,z:.5},I={x:0,y:0,z:1.55},p.forEach((o,a)=>{o.mesh.position.z=-1.13}),d.maxDistance=1.5,d.maxAzimuthAngle=Math.PI*.75)}document.getElementById("close-btn").addEventListener("click",t=>{t.preventDefault(),N()});document.getElementById("contact-btn").addEventListener("click",t=>{t.preventDefault(),document.querySelector(".contact-menu__dropdown").classList.toggle("contact-menu__dropdown--open")});document.addEventListener("mouseup",t=>{const o=document.querySelector(".contact-menu");o.contains(t.target)||o.querySelector(".contact-menu__dropdown").classList.remove("contact-menu__dropdown--open")});window.addEventListener("resize",()=>{c.aspect=window.innerWidth/window.innerHeight,c.updateProjectionMatrix(),g.setSize(window.innerWidth,window.innerHeight)});
