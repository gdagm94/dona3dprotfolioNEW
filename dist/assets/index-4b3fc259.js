import*as n from"https://cdn.skypack.dev/three";import"https://cdn.skypack.dev/dat.gui";import t from"https://cdn.skypack.dev/gsap";import"https://cdn.skypack.dev/three/examples/jsm/libs/stats.module.js";import{OrbitControls as V}from"https://cdn.skypack.dev/three/examples/jsm/controls/OrbitControls.js";import{GLTFLoader as Y}from"https://cdn.skypack.dev/three/examples/jsm/loaders/GLTFLoader.js";import{DRACOLoader as J}from"https://cdn.skypack.dev/three/examples/jsm/loaders/DRACOLoader.js";import{FontLoader as X}from"https://cdn.skypack.dev/three/examples/jsm/loaders/FontLoader.js";import{TextGeometry as k}from"https://cdn.skypack.dev/three/examples/jsm/geometries/TextGeometry.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?a.credentials="include":e.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(e){if(e.ep)return;e.ep=!0;const a=r(e);fetch(e.href,a)}})();let x="light",b=null,B=null,f=null,h=null,P,Z=window.matchMedia("(max-width: 992px)").matches,Q=document.querySelector(".experience-canvas");const $=document.getElementById("loader-wrapper");let ee=["fan_rotation","fan_rotation.001","fan_rotation.002","fan_rotation.003","fan_rotation.004"],g=[{image:"textures/toastwolrd.png",url:"https://toastwolrd.bigcartel.com/"},{image:"textures/nouri.png",url:"https://uxfol.io/p/386305e4/0262f760"},{image:"textures/bobcat.png",url:"https://www.youtube.com/watch?v=NS2l5GU-WiE"},{image:"textures/universal.png",url:"https://www.youtube.com/watch?v=BUValS_grGI"},{image:"textures/designprocess.png",url:"https://drive.google.com/file/d/1vKdFv6T0pnTZAwez6n1UlJqkwGxORcsK/view"}],T={x:.12,y:.2,z:.55},A={x:-1.54,y:.13,z:1.41},D={x:1,y:.45,z:.01},j={x:.05,y:.05,z:0};const l=new n.Scene,m=new n.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.01,1e3);let L={x:1.009028643133046,y:.5463638814987481,z:.4983449671971262},te={x:-.8313297556598935,y:.9383399492446749,z:.7240714481613063};m.position.set(L.x,L.y,L.z);const w=new n.WebGLRenderer({canvas:Q,antialias:!0});w.setSize(window.innerWidth,window.innerHeight);w.setPixelRatio(window.devicePixelRatio);w.shadowMap.enabled=!0;w.shadowMap.type=n.PCFSoftShadowMap;const u=new V(m,w.domElement);u.enablePan=!1;u.minDistance=.9;u.maxDistance=1.6;u.minAzimuthAngle=.2;u.maxAzimuthAngle=Math.PI*.78;u.minPolarAngle=.3;u.maxPolarAngle=Math.PI/2;u.update();const _=new J;_.setDecoderPath("draco/");const O=new Y;O.setDRACOLoader(_);O.load("models/room.glb",function(o){$.style.display="none";const i=document.createElement("video");i.src="textures/cybersite.mov",i.muted=!0,i.playsInline=!0,i.autoplay=!0,i.loop=!0;const r=new n.VideoTexture(i);r.minFilter=n.NearestFilter,r.magFilter=n.NearestFilter,r.generateMipmaps=!1,r.encoding=n.sRGBEncoding,o.scene.children.forEach(e=>{if(e.name!=="Wall"&&(e.castShadow=!0),e.receiveShadow=!0,e.children&&e.children.forEach(a=>{a.name!=="Book001"&&a.name!=="Switch"&&(a.castShadow=!0),a.receiveShadow=!0}),e.name==="Stand"&&(e.children[0].material=new n.MeshBasicMaterial({map:r}),i.play()),e.name==="CPU"&&(e.children[0].material=new n.MeshPhysicalMaterial,e.children[0].material.roughness=0,e.children[0].material.color.set(10066329),e.children[0].material.ior=3,e.children[0].material.transmission=2,e.children[0].material.opacity=.8,e.children[0].material.depthWrite=!1,e.children[0].material.depthTest=!1,e.children[1].material=new n.MeshPhysicalMaterial,e.children[1].material.roughness=0,e.children[1].material.color.set(10066329),e.children[1].material.ior=3,e.children[1].material.transmission=1,e.children[1].material.opacity=.8,e.children[1].material.depthWrite=!1,e.children[1].material.depthTest=!1),e.name==="Book"){b=e.children[0];const a=new n.TextureLoader().load("textures/Design101.png");a.flipY=!1,e.material=new n.MeshStandardMaterial({color:16777215,map:a})}e.name==="SwitchBoard"&&(B=e.children[0])}),l.add(o.scene),N(),P=new n.AnimationMixer(o.scene);const s=o.animations;ee.forEach(e=>{const a=n.AnimationClip.findByName(s,e);a&&P.clipAction(a).play()}),ne(),se(),le(),ce(),de(),me(o.scene)},function(o){console.error(o)});const y=new n.AmbientLight(16777215,.6);l.add(y);const d=new n.PointLight(16777215,2.5,10);d.position.set(.3,2,.5);d.castShadow=!0;d.shadow.radius=5;d.shadow.mapSize.width=2048;d.shadow.mapSize.height=2048;d.shadow.camera.far=2.5;d.shadow.bias=-.002;l.add(d);const R=new n.PointLight(16711680,30,.2),W=new n.PointLight(65280,30,.12),F=new n.PointLight(65280,30,.2),G=new n.PointLight(65280,30,.2),M=new n.PointLight(65280,30,.05);R.position.set(0,.29,-.29);W.position.set(-.15,.29,-.29);F.position.set(.21,.29,-.29);G.position.set(.21,.19,-.29);M.position.set(.21,.08,-.29);l.add(R);l.add(W);l.add(F);l.add(G);l.add(M);const v=new n.PointLight(16711680,0,1.1),E=new n.PointLight(16711680,0,1.1),S=new n.PointLight(16711680,0,1.1),z=new n.PointLight(16711680,0,1.1);v.position.set(-.2,.6,.24);E.position.set(-.2,.6,.42);S.position.set(-.2,.6,.01);z.position.set(-.2,.6,-.14);l.add(v);l.add(E);l.add(S);l.add(z);const oe=new n.Clock;function N(){requestAnimationFrame(N),P&&P.update(oe.getDelta()),w.render(l,m)}function ne(){const o=new X;o.load("fonts/unione.json",function(i){const r=[new n.MeshPhongMaterial({color:1515303,flatShading:!0}),new n.MeshPhongMaterial({color:16777215})],s=new k("Hey, I'm Donatos",{font:i,size:.08,height:.01});f=new n.Mesh(s,r),f.rotation.y=Math.PI*.5,f.position.set(-.27,.55,.5),l.add(f)}),o.load("fonts/helvatica.json",function(i){const r=[new n.MeshPhongMaterial({color:1515303,flatShading:!0}),new n.MeshPhongMaterial({color:16777215})],s=new k("Creating products and refining processes",{font:i,size:.018,height:0});h=new n.Mesh(s,r),h.rotation.y=Math.PI*.5,h.position.set(-.255,.5,.5),l.add(h)})}function ie(o){o==="dark"?(B.rotation.z=Math.PI/7,document.body.classList.remove("light-theme"),document.body.classList.add("dark-theme"),t.to(d.color,{r:.2725490196078431,g:.23137254901960785,b:.6862745098039216}),t.to(y.color,{r:.17254901960784313,g:.23137254901960785,b:.6862745098039216}),t.to(d,{intensity:1.5}),t.to(y,{intensity:.3}),t.to(M,{distance:.07}),t.to(f.material[0].color,{r:8,g:8,b:8,duration:0}),t.to(f.material[1].color,{r:5,g:5,b:5,duration:0}),t.to(h.material[0].color,{r:8,g:8,b:8,duration:0}),t.to(h.material[1].color,{r:5,g:5,b:5,duration:0}),t.to(v,{intensity:.6}),t.to(E,{intensity:.6}),t.to(S,{intensity:.6}),t.to(z,{intensity:.6})):(B.rotation.z=0,document.body.classList.remove("dark-theme"),document.body.classList.add("light-theme"),t.to(d.color,{r:1,g:1,b:1}),t.to(y.color,{r:1,g:1,b:1}),t.to(d,{intensity:2.5}),t.to(y,{intensity:.6}),t.to(M,{distance:.05}),t.to(f.material[0].color,{r:.09019607843137255,g:.12156862745098039,b:.15294117647058825,duration:0}),t.to(f.material[1].color,{r:1,g:1,b:1,duration:0}),t.to(h.material[0].color,{r:.09019607843137255,g:.12156862745098039,b:.15294117647058825,duration:0}),t.to(h.material[1].color,{r:1,g:1,b:1,duration:0}),t.to(v,{intensity:0}),t.to(E,{intensity:0}),t.to(S,{intensity:0}),t.to(z,{intensity:0}))}function ae(){u.enabled=!0}function C(){u.enabled=!1}function I(){document.getElementById("close-btn").style.display="block"}function re(){document.getElementById("close-btn").style.display="none"}function q(){b&&t.to(b.rotation,{x:0,duration:1.5})}function H(){g.length!==0&&g.forEach((o,i)=>{t.to(o.mesh.material,{opacity:0,duration:1}),t.to(o.mesh.position,{y:o.y,duration:1}),t.to(o.mesh.scale,{x:0,y:0,z:0,duration:0,delay:1})})}function U(){q(),H(),re(),t.to(m.position,{...L,duration:1.5}),t.to(m.rotation,{...te,duration:1.5}),t.delayedCall(1.5,ae),x!=="dark"&&t.to(d,{intensity:2.5,duration:1.5})}function se(){document.getElementById("logo").addEventListener("click",function(o){o.preventDefault(),U()})}function K(){b&&(t.to(m.position,{...T,duration:1.5}),t.to(m.rotation,{...A,duration:1.5}),t.to(b.rotation,{x:Math.PI,duration:1.5,delay:1.5}),x!=="dark"&&t.to(d,{intensity:1,duration:1.5}))}function le(){document.getElementById("about-menu").addEventListener("click",function(o){o.preventDefault(),C(),H(),K(),t.delayedCall(1.5,I)})}function ce(){g.forEach((o,i)=>{const r=i%3===0?0:1,s=Math.floor(i/3),e=new n.PlaneGeometry(.71,.4),a=new n.MeshBasicMaterial({color:16777215,map:new n.TextureLoader().load(o.image),transparent:!0,opacity:0}),c=new n.Mesh(e,a);c.name="project",c.userData={url:o.url},c.position.set(.3+i*.8*r,1-s*.5,-1.15),c.scale.set(0,0,0),g[i].mesh=c,g[i].y=1-s*.5,l.add(c)}),document.getElementById("projects-menu").addEventListener("click",function(o){o.preventDefault(),C(),q(),t.to(m.position,{...D,duration:1.5}),t.to(m.rotation,{...j,duration:1.5}),t.delayedCall(1.5,I),g.forEach((i,r)=>{i.mesh.scale.set(1,1,1),t.to(i.mesh.material,{opacity:1,duration:1.5,delay:1.5+r*.1}),t.to(i.mesh.position,{y:i.y+.05,duration:1,delay:1.5+r*.1})})})}function de(){const o=new n.Vector2,i=new n.Raycaster;let r;window.addEventListener("click",function(s){const e=x==="light"?"dark":"light",a=document.getElementById("close-btn"),c=document.getElementById("projects-menu");if(s.target===a||a.contains(s.target)||s.target===c||c.contains(s.target))return!1;o.x=s.clientX/window.innerWidth*2-1,o.y=-(s.clientY/window.innerHeight)*2+1,i.setFromCamera(o,m),r=i.intersectObjects(l.children),r.forEach(p=>{p.object.name==="project"&&p.object.userData.url&&window.open(p.object.userData.url),(p.object.name==="Book"||p.object.name==="Book001")&&(C(),K(),t.delayedCall(1.5,I)),(p.object.name==="SwitchBoard"||p.object.name==="Switch")&&(x=e,ie(x))})})}function me(o){Z&&(o.scale.set(.95,.95,.95),T={x:.09,y:.23,z:.51},A={x:-1.57,y:0,z:1.57},D={x:1.1,y:.82,z:.5},j={x:0,y:0,z:1.55},g.forEach((i,r)=>{i.mesh.position.z=-1.13}),u.maxDistance=1.5,u.maxAzimuthAngle=Math.PI*.75)}document.getElementById("close-btn").addEventListener("click",o=>{o.preventDefault(),U()});document.getElementById("contact-btn").addEventListener("click",o=>{o.preventDefault(),document.querySelector(".contact-menu__dropdown").classList.toggle("contact-menu__dropdown--open")});document.addEventListener("mouseup",o=>{const i=document.querySelector(".contact-menu");i.contains(o.target)||i.querySelector(".contact-menu__dropdown").classList.remove("contact-menu__dropdown--open")});window.addEventListener("resize",()=>{m.aspect=window.innerWidth/window.innerHeight,m.updateProjectionMatrix(),w.setSize(window.innerWidth,window.innerHeight)});
